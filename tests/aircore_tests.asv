%effectively, what is different from a test and an example
% a test must test an ultra specific functionality

%% Test double class
% exp = 'double';
% act = ones;
% assert(isa(act,exp))


%% specify domain
%% Set up the domain parameters.
L0 = 1e-6;  % length unit: microns
wvlen = 2.0;  % wavelength in L0
xrange = [-2 2];  % x boundaries in L0
yrange = [-2 2];  % y boundaries in L0
N = [200 200];  % [Nx Ny]
Npml = 0*[10 10];  % [Nx_pml Ny_pml] need to deal with the special case where both are 
[xrange, yrange, N, dL, Lpml] = domain_with_pml(xrange, yrange, N, Npml);  % domain is expanded to include PML


%% specify aircore
air_core = air_core_structure(xrange, yrange, N, Lpml);
y_center_of_core = 0;
core_thickness = 2;
wall_thickness = 0.5;
wall_materials =[6,12];

air_core.add_grating_array(obj, num_cells, lattice_constant, ...
                thickness, epsilon, fill_factor, y_center)

% air_core.build_uniform_wall_core(y_center_of_core,...
%     core_thickness, wall_thickness, wall_materials)

figure();
visreal(air_core.epsilon, xrange, yrange);
wall1 = air_core.wall_coords{1};
wall2 = air_core.wall_coords{2};
xbounds = wall1{1}; ybounds = wall1{2};

%% wall coords
line(xbounds, [ybounds(1), ybounds(1)])
line(xbounds, [ybounds(2), ybounds(2)])
xbounds = wall2{1}; ybounds = wall2{2};

line(xbounds, [ybounds(1), ybounds(1)])
line(xbounds, [ybounds(2), ybounds(2)])



